{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import ApiService from'../../service/ApiService';import Pagination from'../common/Pagination';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ManageBookingsPage=()=>{const[bookings,setBookings]=useState([]);const[filteredBookings,setFilteredBookings]=useState([]);const[searchTerm,setSearchTerm]=useState('');const[currentPage,setCurrentPage]=useState(1);const[bookingsPerPage]=useState(6);const navigate=useNavigate();useEffect(()=>{const fetchBookings=async()=>{try{const response=await ApiService.getAllBookings();const allBookings=response.bookingList;setBookings(allBookings);setFilteredBookings(allBookings);}catch(error){console.error('Error fetching bookings:',error.message);}};fetchBookings();},[]);useEffect(()=>{filterBookings(searchTerm);},[searchTerm,bookings]);const filterBookings=term=>{if(term===''){setFilteredBookings(bookings);}else{const filtered=bookings.filter(booking=>booking.bookingConfirmationCode&&booking.bookingConfirmationCode.toLowerCase().includes(term.toLowerCase()));setFilteredBookings(filtered);}setCurrentPage(1);};const handleSearchChange=e=>{setSearchTerm(e.target.value);};const indexOfLastBooking=currentPage*bookingsPerPage;const indexOfFirstBooking=indexOfLastBooking-bookingsPerPage;const currentBookings=filteredBookings.slice(indexOfFirstBooking,indexOfLastBooking);const paginate=pageNumber=>setCurrentPage(pageNumber);return/*#__PURE__*/_jsxs(\"div\",{className:\"bookings-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"All Bookings\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-div\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Filter by Booking Number:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchTerm,onChange:handleSearchChange,placeholder:\"Enter booking number\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"booking-results\",children:currentBookings.map(booking=>/*#__PURE__*/_jsxs(\"div\",{className:\"booking-result-item\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Booking Code:\"}),\" \",booking.bookingConfirmationCode]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Check In Date:\"}),\" \",booking.checkInDate]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Check out Date:\"}),\" \",booking.checkOutDate]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Total Guests:\"}),\" \",booking.totalNumOfGuest]}),/*#__PURE__*/_jsx(\"button\",{className:\"edit-room-button\",onClick:()=>navigate(\"/admin/edit-booking/\".concat(booking.bookingConfirmationCode)),children:\"Manage Booking\"})]},booking.id))}),/*#__PURE__*/_jsx(Pagination,{roomsPerPage:bookingsPerPage,totalRooms:filteredBookings.length,currentPage:currentPage,paginate:paginate})]});};export default ManageBookingsPage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","ApiService","Pagination","jsx","_jsx","jsxs","_jsxs","ManageBookingsPage","bookings","setBookings","filteredBookings","setFilteredBookings","searchTerm","setSearchTerm","currentPage","setCurrentPage","bookingsPerPage","navigate","fetchBookings","response","getAllBookings","allBookings","bookingList","error","console","message","filterBookings","term","filtered","filter","booking","bookingConfirmationCode","toLowerCase","includes","handleSearchChange","e","target","value","indexOfLastBooking","indexOfFirstBooking","currentBookings","slice","paginate","pageNumber","className","children","type","onChange","placeholder","map","checkInDate","checkOutDate","totalNumOfGuest","onClick","concat","id","roomsPerPage","totalRooms","length"],"sources":["/Users/daongoctung/bookinghotel/phegon-hotel-booking-and-management/frontend/src/component/admin/ManageBookingsPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport ApiService from '../../service/ApiService';\nimport Pagination from '../common/Pagination';\n\nconst ManageBookingsPage = () => {\n    const [bookings, setBookings] = useState([]);\n    const [filteredBookings, setFilteredBookings] = useState([]);\n    const [searchTerm, setSearchTerm] = useState('');\n    const [currentPage, setCurrentPage] = useState(1);\n    const [bookingsPerPage] = useState(6);\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        const fetchBookings = async () => {\n            try {\n                const response = await ApiService.getAllBookings();\n                const allBookings = response.bookingList;\n                setBookings(allBookings);\n                setFilteredBookings(allBookings);\n            } catch (error) {\n                console.error('Error fetching bookings:', error.message);\n            }\n        };\n\n        fetchBookings();\n    }, []);\n\n    useEffect(() => {\n        filterBookings(searchTerm);\n    }, [searchTerm, bookings]);\n\n    const filterBookings = (term) => {\n        if (term === '') {\n            setFilteredBookings(bookings);\n        } else {\n            const filtered = bookings.filter((booking) =>\n                booking.bookingConfirmationCode && booking.bookingConfirmationCode.toLowerCase().includes(term.toLowerCase())\n            );\n            setFilteredBookings(filtered);\n        }\n        setCurrentPage(1);\n    };\n\n    const handleSearchChange = (e) => {\n        setSearchTerm(e.target.value);\n    };\n\n    const indexOfLastBooking = currentPage * bookingsPerPage;\n    const indexOfFirstBooking = indexOfLastBooking - bookingsPerPage;\n    const currentBookings = filteredBookings.slice(indexOfFirstBooking, indexOfLastBooking);\n\n    const paginate = (pageNumber) => setCurrentPage(pageNumber);\n\n    return (\n        <div className='bookings-container'>\n            <h2>All Bookings</h2>\n            <div className='search-div'>\n                <label>Filter by Booking Number:</label>\n                <input\n                    type=\"text\"\n                    value={searchTerm}\n                    onChange={handleSearchChange}\n                    placeholder=\"Enter booking number\"\n                />\n            </div>\n\n            <div className=\"booking-results\">\n                {currentBookings.map((booking) => (\n                    <div key={booking.id} className=\"booking-result-item\">\n                        <p><strong>Booking Code:</strong> {booking.bookingConfirmationCode}</p>\n                        <p><strong>Check In Date:</strong> {booking.checkInDate}</p>\n                        <p><strong>Check out Date:</strong> {booking.checkOutDate}</p>\n                        <p><strong>Total Guests:</strong> {booking.totalNumOfGuest}</p>\n                        <button\n                            className=\"edit-room-button\"\n                            onClick={() => navigate(`/admin/edit-booking/${booking.bookingConfirmationCode}`)}\n                        >Manage Booking</button>\n                    </div>\n                ))}\n            </div>\n\n            <Pagination\n                roomsPerPage={bookingsPerPage}\n                totalRooms={filteredBookings.length}\n                currentPage={currentPage}\n                paginate={paginate}\n            />\n        </div>\n    );\n};\n\nexport default ManageBookingsPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}